@page "/Huacales/Stock"
@rendermode InteractiveServer
@inject EntradasHuacalesServices huacalesService

<PageTitle>Inventario de Huacales</PageTitle>

<div class="container mt-4">
    <div class="card shadow">
        <div class="card-header bg-primary text-white">
            <h3 class="mb-0"><i class="bi bi-box-seam me-2"></i>Stock de Huacales</h3>
        </div>
        <div class="card-body">
            <div class="row">
                @foreach (var tipo in TiposList)
                {
                    <div class="col-md-4 mb-3">
                        <div class="card border-0 shadow-sm bg-light">
                            <div class="card-body text-center">
                                <h5 class="text-muted mb-2">@tipo.Descripcion</h5>
                                <h2 class="display-4 fw-bold @(tipo.Existencia < 0 ? "text-danger" : "text-dark")">
                                    @tipo.Existencia
                                </h2>
                                <span class="badge rounded-pill @(ObtenerClaseColor(tipo.Descripcion))">
                                    En Almacén
                                </span>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

@code {
    public List<TiposHuacales> TiposList { get; set; } = new();

    protected override async Task OnInitializedAsync()
    {
        TiposList = await huacalesService.GetTipos();
    }

    private string ObtenerClaseColor(string descripcion)
    {
        return descripcion.ToLower() switch
        {
            "rojo" => "bg-danger",
            "verde" => "bg-success",
            "amarillo" => "bg-warning text-dark",
            _ => "bg-secondary"
        };
    }
}